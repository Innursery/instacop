<!-- (c) 2017 twitter.com/InstaCopV2 twitter.com/bqdxo -->

<!DOCTYPE html>

<html>

	<head>

		<meta charset="utf-8">

		<meta name="referrer" content="no-referrer">

		<link rel="mask-icon" href="instacop/mask.svg" color="#ff4727">
		<link rel="shortcut icon" type="image/x-icon" href="favicon.ico">

		<title>InstaCop V2</title>

		<script src='https://www.google.com/recaptcha/api.js' async defer></script>

		<link rel="stylesheet" href="instacop/bootstrap/css/bootstrap.min.css">
		<link rel="stylesheet" href="instacop/instacop.css">

	</head>


	<body class="beluga-fg steeple-bg">

		<div id="app">

			<form action="" method="post" target="cart_frame" hidden="true" id="post_form" name="addProductForm">

				<input name="layer" value="Add To Bag overlay">
				<input name="pid" id="post_pid" value="">
				<input name="Quantity" value="1">
				<input name="g-recaptcha-response" id="post_token" value="">
				<input name="x-PrdRt" id="post_dup" value="">
				<input name="masterPid" id="post_mpid" value="">
				<input name="sessionSelectedStoreID" value="null">
				<input name="responseformat" value="json" disabled="disabled">
				<input name="ajax" value="true">

			</form>


			<div class="container">

				<header class="header"><h2>
					<span class="pointer" onclick="location.reload();">InstaCop </span>
					<span class="pointer" :class="{ 'solar-fg': auth }" @click="editPW">V2</span>
				</h2></header>

				<div class="row main">

					<div class="col-lg-4 col-sm-6">

						<h4><span class="label beluga-bg">Settings</span></h4>

						<div class="row captcha-w-row">

							<div class="form-group col-sm-6">

								<label for="user_locale">Locale &nbsp;<span class="caret"></span></label>

								<select class="form-control input-select" id="user_locale" v-model="config.locale">

									<optgroup label="Oceania">
										<option :value="{ id: 'AU', domain: 'com.au', lang: 'en' }">Australia</option>
										<option :value="{ id: 'NZ', domain: 'co.nz', lang: 'en' }">New Zealand</option>
									</optgroup>
									<optgroup label="Europe">
										<option :value="{ id: 'AT', domain: 'at', lang: 'de' }">Austria</option>
										<option :value="{ id: 'BE', domain: 'be', lang: 'fr' }">Belgium</option>
										<option :value="{ id: 'CZ', domain: 'cz', lang: 'cs' }">Czech Republic</option>
										<option :value="{ id: 'DK', domain: 'dk', lang: 'da' }">Denmark</option>
										<option :value="{ id: 'FI', domain: 'fi', lang: 'fi' }">Finland</option>
										<option :value="{ id: 'FR', domain: 'fr', lang: 'fr' }">France</option>
										<option :value="{ id: 'DE', domain: 'de', lang: 'de' }">Germany</option>
										<option :value="{ id: 'IE', domain: 'ie', lang: 'en' }">Ireland</option>
										<option :value="{ id: 'IT', domain: 'it', lang: 'it' }">Italy</option>
										<option :value="{ id: 'NL', domain: 'nl', lang: 'nl' }">Netherlands</option>
										<option :value="{ id: 'PL', domain: 'pl', lang: 'pl' }">Poland</option>
										<option :value="{ id: 'RU', domain: 'ru', lang: 'ru' }">Russia</option>
										<option :value="{ id: 'ES', domain: 'es', lang: 'es' }">Spain</option>
										<option :value="{ id: 'SE', domain: 'se', lang: 'sv' }">Sweden</option>
										<option :value="{ id: 'GB', domain: 'co.uk', lang: 'en' }">United Kingdom</option>
									</optgroup>
									<optgroup label="America">
										<option :value="{ id: 'US', domain: 'com', lang: 'en' }">United States</option>
										<option :value="{ id: 'CA', domain: 'ca', lang: 'en' }">Canada</option>
										<option :value="{ id: 'MX', domain: 'mx', lang: 'es' }">Mexico</option>
										<option :value="{ id: 'BR', domain: 'com.br', lang: 'pt' }">Brazil</option>
									</optgroup>

								</select>

							</div>

							<div class="form-group col-sm-6">

								<label for="pid_style">Product</label>

								<div class="pull-right">
									<span class="badge pointer v2-green invisible" @click="config.style = 'DA9572';">V2</span>
									<span class="badge pointer v2-zebra" @click="config.style = 'CP9654';">V2</span>
								</div>

								<div class="input-group">

									<input class="form-control" type="text" spellcheck="false" placeholder="XX0000" v-model="config.style">
									<span class="input-group-btn">
										<a class="form-control btn btn-default" id="pid_img" target="_blank" :href="pidLink" :style="{ 'background-image': 'url(' + pidImg + ')' }">{{ pidImg ? "" : "-" }}</a>
									</span>

								</div>

							</div>

						</div>

						<div class="row captcha-w-row">
							
							<div class="form-group col-sm-6">

								<label for="xpr_val">Duplicate</label>

								<input class="form-control" type="text" spellcheck="false" placeholder="XXXXXX" v-model="config.captchaDup">

							</div>

						</div>

						<div class="row captcha-w-row">

							<div class="form-group col-sm-12">

								<label for="client_id">Client ID</label>

								<input class="form-control" type="text" spellcheck="false" placeholder="xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx" style="font-size: 11px" v-model="config.clientID">

							</div>

						</div>

						<div class="spacer"></div>

						<h4><span class="label beluga-bg">Captcha</span></h4>

						<div class="form-group captcha-w">

							<label for="site_key">Sitekey</label>

							<div class="pull-right">
								<span class="badge btn-bg beluga-fg" id="token_timer" :class="{ invisible : !tokens.length }"></span>
								<span class="badge btn-bg beluga-fg pointer" :class="{ 'solar-bg' : tokens.length }" @click="popToken">Tokens: {{tokens.length}}</span>
							</div>

							<div class="input-group">

								<input class="form-control steeple-bg" type="text" spellcheck="false" readonly="true" style="font-size: 9px" v-model="config.sitekey">

								<span class="input-group-btn">
									<button class="btn btn-default" @click="fetchSitekey">
										<span class="glyphicon glyphicon-download" :class="{ 'gly-spin' : sitekey.loading }"></span>
									</button>
									<button class="btn btn-default" @click="editSitekey">
										<span class="glyphicon glyphicon-cog"></span>
									</button>
								</span>

							</div>

						</div>

						<div class="form-group captcha-w">

							<label for="site_key">2Captcha</label>

							<div class="pull-right">
								<span class="badge btn-bg solar-bg" v-if="tucap.error">{{tucap.error}}</span>
								<span class="badge btn-bg beluga-fg pointer" v-if="!tucap.error" @click="popToken">Requests: {{tucap.requests}}</span>
							</div>

							<div class="input-group">

								<input class="form-control steeple-bg" type="text" spellcheck="false" style="font-size: 9px" v-model="config.tucap">

								<span class="input-group-btn">
									<button class="btn btn-default" @click="requestTucap">
										<span class="glyphicon glyphicon-plus-sign" :class="{ 'gly-spin' : tucap.requests }"></span>
									</button>
								</span>

							</div>

						</div>

						<div class="g-recaptcha" :data-sitekey="config.sitekey" data-callback="captchaCallback"></div>

						<div class="spacer"></div>
						<div class="spacer"></div>
						<div class="spacer-sm"></div>

						<h4><span class="label beluga-bg">HMAC</span></h4>

						<div class="row captcha-w-row">

							<div class="form-group col-sm-6">

								<label>Cookie</label>

								<input class="form-control steeple-bg" type="text" spellcheck="false" v-model="config.hmac">

							</div>

							<div class="form-group col-sm-6">

								<label>Splash</label>

								<div class="input-group btn-group-justified">

									<a class="btn btn-default btn-block" :href="splashLink" target="_blank">Open</a>

								</div>

							</div>

						</div>

						<div class="form-group captcha-w">

							<div class="input-group col-sm-12">

								<label>Value</label>

								<div class="pull-right">
									<span class="badge btn-bg beluga-fg" id="hmac_timer" :class="{ invisible : !(hmac.status == 'Valid') }"></span>
									<span class="badge btn-bg beluga-fg" :class="{ 'solar-bg' : (hmac.status == 'Valid') }">{{hmac.status}}</span>
								</div>

								<div class="input-group">

									<input class="form-control steeple-bg" type="text" spellcheck="false" readonly="true" style="font-size: 10px" :disabled="!cookiesAccess" v-model="hmac.cookie">

									<span class="input-group-btn">
										<button class="btn btn-default" :disabled="!cookiesAccess" @click="editHMAC">
											<span class="glyphicon glyphicon-cog"></span>
										</button>
									</span>

								</div>

							</div>

						</div>

					</div>

					<div class="col-lg-4 col-sm-6">

						<h4><span class="label beluga-bg">Inventory</span></h4>

						<div class="row table-w-row">

							<div class="form-group col-sm-6">

								<label for="auto_atc">Mode</label>

								<div class="input-group">

									<div class="btn-group btn-group-sm" data-toggle="buttons">

										<label class="btn btn-default" :class="{ active : inventory.atc.mode == 'Off'}">
											<input type="radio" name="atc_mode" v-model="inventory.atc.mode" value="Off">
												<span class="glyphicon glyphicon-off"></span>
											</input>
										</label>
										<label class="btn btn-default" :class="{ active : inventory.atc.mode == 'Auto'}">
											<input type="radio" name="atc_mode" v-model="inventory.atc.mode" value="Auto">Auto
										</label>
										<label class="btn btn-default" :class="{ active : inventory.atc.mode == 'Monitor'}" @click.prevent="inventory.atc.mode = 'Monitor'; enableNotifications();">
											<input type="radio" name="atc_mode">Monitor
										</label>

									</div>
									
								</div>

							</div>

							<div class="form-group col-sm-6">

								<label for="refresh_s">Refresh</label>
								<span class="badge btn-bg beluga-fg pull-right">{{inventory.status}}</span>

								<div class="input-group input-group-sm">

									<div class="btn-group btn-group-sm" data-toggle="buttons">

										<label class="btn btn-default" :class="{ active : inventory.refresh.mode == 'Off'}">
											<input type="radio" name="refresh_mode" v-model="inventory.refresh.mode" value="Off">
												<span class="glyphicon glyphicon-off"></span>
											</input>
										</label>
										<label class="btn btn-default" :class="{ active : inventory.refresh.mode == 'Captcha'}">
											<input type="radio" name="refresh_mode" v-model="inventory.refresh.mode" value="Captcha">
												<span class="glyphicon glyphicon-repeat"></span>
											</input>
										</label>
										<label class="btn btn-default" :class="{ active : inventory.refresh.mode == 'Timer'}" @click.prevent="setSleep">
											<input type="radio" name="refresh_mode">{{inventory.refresh.sleep}} s
										</label>

									</div>

									<span class="input-group-btn"> 
										<button class="btn btn-default" :disabled="inventory.refresh.mode == 'Timer' || inventory.status == '...'" @click="loadInventory">
											<span class="glyphicon glyphicon-refresh" id="stock_gif" :class="{ 'gly-spin' : inventory.status == '...' }"></span>
										</button>
									</span>
									
								</div>

							</div>

						</div>

						<table class="table table-hover table-condensed form-bg table-w" id="stock_table">

							<colgroup>
								<col width="13%">
								<col width="17%">
								<col width="15%">
								<col width="15%">
								<col width="15%">
								<col width="25%">
							</colgroup>
							<thead>
								<tr>
									<th>Size</th>
									<th>{{inventory.locale}}</th>
									<th class="text-right pointer" :class="{ strike : !inventory.avail.set }" @click="inventory.avail.set = !inventory.avail.set">{{inventory.avail.total}}</th>
									<th class="text-right pointer" :class="{ strike : !inventory.stock.set }" @click="inventory.stock.set = !inventory.stock.set">{{inventory.stock.total}}</th>
									<th class="text-right">Δ</th>
									<th></th>
								</tr>
							</thead>
							<tbody id="stock_body">
								<tr>
									<td></td>
									<td></td>
									<td></td>
									<td></td>
									<td></td>
									<td></td>
								</tr>
							</tbody>

						</table>

					</div>


					<div class="col-lg-4 col-sm-12">

						<h4><span class="label beluga-bg">adidas.{{config.locale.domain}}</span></h4>

						<div class="row">

							<div class="form-group col-sm-5">

								<label for="account_buttons">Account</label>
								
								<div class="btn-group btn-group-sm input-group" role="group">
									<a class="btn btn-default" name="account_buttons" :href="adcLink('login')" target="_blank">Login</a>
									<a class="btn btn-default" name="account_buttons" :href="adcLink('logout')" target="_blank">Logout</a>
								</div>

							</div>

							<div class="form-group col-sm-7">

								<div class="pull-right">

									<label for="cart_buttons">Cart</label>

									<span class="badge btn-bg beluga-fg pull-right pointer" v-if="cart.adding">{{cart.text}}</span>

									<span class="badge btn-bg beluga-fg pull-right pointer" v-if="!cart.adding && cookiesAccess" :class="{'solar-bg' : cart.items && cart.userCount}" @click="resetCart">
										<span class="glyphicon glyphicon-shopping-cart"></span> {{cart.items}}
									</span>

									<div class="btn-group btn-group-sm input-group" role="group">
										<a class="btn btn-default" name="cart_buttons" :href="adcLink('show')" target="_blank">Show</a>
										<a class="btn btn-default" name="cart_buttons" :href="adcLink('paypal')" target="_blank">PayPal</a>
										<a class="btn btn-default" name="cart_buttons" :href="adcLink('checkout')" target="_blank">Checkout</a>
									</div>

								</div>

							</div>

						</div>

						<my-iframe></my-iframe>

					</div>

				</div>


				<footer class="footer solar-bg">

					&copy; 2017 &mdash; v2.8 &mdash; <a href="https://twitter.com/InstaCopV2" target="_blank">InstaCop on Twitter</a> &mdash; <a href="https://twitter.com/bqdxo" target="_blank">@bq</a> &mdash; Bookmarklets:

					<a href="

						javascript: (function () {

							var instaURL = prompt('Enter InstaCop URL:', 'w.www.adidas.de');
							var queryString = '/?';
							try {queryString += '&pid=' + document.getElementsByName('masterPid')[0].value;} catch(err) {}
							try {queryString += '&sitekey=' + document.getElementsByClassName('g-recaptcha')[0].getAttribute('data-sitekey');} catch(err) {}
							if (window.OCAPI_KEY != undefined) queryString += '&clientID=' + window.OCAPI_KEY;
							try {
							    window.captchaResponse();
							    queryString += '&captchaDup=' +  document.getElementsByClassName('captcha-duplicate')[0].name;
							} catch(err) {}
							window.open('http://' + instaURL + queryString);

						})();

						">InstaLaunch</a>,

					<a href="

						javascript: (function () {

							decodeURIComponent(document.cookie).split(';').forEach( item => {
								let name = item.split('=')[0].split(' ').join('');
								if (name.includes('dwanon')) {
									let value = item.split('=')[1].split(' ').join('');
									prompt(name, value);
								}
							});

						})();

						">InstaCart</a> &mdash; Utils:

					<a :href="instaLink">InstaLink</a>,

					<a href="javascript: prompt('This is your UserAgent:', navigator.userAgent); void(0);">UserAgent</a>,

					<a href="javascript: $.get('https://ipinfo.io', function(response) { alert(response.ip + ' (' + response.country + ')'); }, 'jsonp'); void(0);">IP</a>

				</footer>

			</div>

		</div>

		<script src="instacop/jquery.min.js"></script>
		<script src='instacop/js.cookie.js'></script>
		<script src="instacop/json2html.js"></script>

		<script src="instacop/inventory.js"></script>
		<script src="instacop/minutes2.js"></script>

		<script src="instacop/vue.js"></script>
		<script src="instacop/config.js"></script>
		<script src="instacop/app.js"></script>

	</body>

</html>